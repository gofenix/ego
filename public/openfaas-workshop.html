<html>
    <head>
        <title> 
            openfaas-workshop
        </title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/styles/default.min.css"
    />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/highlight.min.js"></script>

    <script>
      hljs.highlightAll();
    </script>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      .markdown-body {
        box-sizing: border-box;
        min-width: 200px;
        max-width: 980px;
        margin: 0 auto;
        padding: 45px;
      }

      @media (max-width: 767px) {
        .markdown-body {
          padding: 15px;
        }
      }
    </style>
    </head>

    <body>
        <div>
            <article class="markdown-body"> 
                <hr class="thin" />
<p>
title: “Openfaas Workshop”
date: 2021-03-30T09:53:12+08:00
draft: false</p>
<hr class="thin" />
<h1>
openfaas-研讨会</h1>
<p>
这是一个自定进度的研讨会，用于学习如何使用 OpenFaaS 构建、部署和运行无服务器功能。</p>
<p>
  <img src="https://github.com/openfaas/media/raw/master/OpenFaaS_Magnet_3_1_png.png" alt="" />
</p>
<p>
在这个研讨会中，您首先将 OpenFaaS 部署到您的笔记本电脑或带有 Docker for Mac 或 Windows 的远程集群中。然后，您将使用 OpenFaaS 用户界面、CLI 和函数商店来完成最基本的使用。构建完成后，在 Python 中部署调用自己的无服务器函数，您将继续学习以下主题：使用 pip 管理依赖关系、通过安全机密处理应用编程接口令牌、使用 Prometheus 监控函数、异步调用函数以及将函数链接在一起创建应用程序。实验中让人兴奋的是可以让您创建自己的 GitHub 机器人，它可以自动响应问题。同样的方法也可以通过 IFTTT.com 连接到在线事件流，这将使您能够构建机器人、自动响应器以及与社交媒体和物联网设备的集成。</p>
<p>
最后，这些实验也涵盖了更高级的主题，并为进一步学习提供建议。</p>
<p>
<strong>其他语言</strong></p>
<ul>
  <li>
<a href="./translations/ja">日本語</a>  </li>
  <li>
<a href="./translations/zh">中文</a>  </li>
</ul>
<h2>
要求：</h2>
<p>
我们将介绍如何在<a href="./lab1.md">Lab 1</a>中安装这些要求。请在参加讲师指导的研讨会之前完成<a href="./lab1.md">Lab 1</a></p>
<ul>
  <li>
函数将用 Python 编写，因此有编程或脚本经验者优先  </li>
  <li>
安装推荐的代码编辑器/IDE <a href="https://code.visualstudio.com/download">VSCode</a>  </li>
  <li>
Windows 安装 <a href="https://git-scm.com/downloads">Git Bash</a>  </li>
  <li>
首选操作系统： MacOS，Windows 10Pro/Enterprise，Ubuntu Linux  </li>
</ul>
<p>
Docker:</p>
<ul>
  <li>
Docker CE for <a href="https://store.docker.com/editions/community/docker-ce-desktop-mac">Mac</a>/<a href="https://store.docker.com/editions/community/docker-ce-desktop-windows">Windows</a> <strong>Edge edition</strong>  </li>
  <li>
Docker CE for Linux  </li>
</ul>
<blockquote>
  <p>
注意：作为最后的手段，如果您有不兼容的 PC，您可以在<a href="https://labs.play-with-docker.com/.%E4%B8%8A%E8%BF%90%E8%A1%8C%E7%A0%94%E8%AE%A8%E4%BC%9A">https://labs.play-with-docker.com/.上运行研讨会</a>  </p>
</blockquote>
<h2>
讲师主导的研讨会</h2>
<p>
如果你参加了一个由讲师领导的研讨会，那么将会通过一个链接来加入 OpenFaaS Slack 社区。使用研讨会指定的渠道讨论意见、问题和建议。</p>
<h2>
选择你的路径</h2>
<p>
在实验室 1 中，您将选择您的路径，然后在整个实验室中寻找您的容器编排器所需的任何特殊命令。</p>
<h3>
Kubernetes</h3>
<p>
您还可以使用 OpenFaaS 了解 Kubernetes 上的 Serverless。</p>
<p>
OpenFaaS 社区的建议是，您可以在生产中运行 Kubernetes，但是所有知识都是相通的，并且功能不必重建。</p>
<h2>
<a href="./lab1.md">实验 1 - OpenFaaS 准备</a></h2>
<ul>
  <li>
安装先决条件  </li>
  <li>
使用 Kubernetes 建立单节点集群  </li>
  <li>
Docker Hub 帐户  </li>
  <li>
OpenFaaS CLI  </li>
  <li>
部署 OpenFaaS  </li>
</ul>
<h2>
<a href="./lab2.md">实验 2 - 测试</a></h2>
<ul>
  <li>
使用 UI 门户  </li>
  <li>
通过函数商店部署  </li>
  <li>
学习 CLI  </li>
  <li>
通过 Prometheus 监控  </li>
</ul>
<h2>
<a href="./lab3.md">实验 3 - 函数介绍</a></h2>
<ul>
  <li>
生成新函数的脚手架  </li>
  <li>
构建 astronaut-finder 函数  </li>
  <li>
通过<code class="inline">pip</code>添加依赖  </li>
  <li>
疑难解答：找到容器的日志  </li>
  <li>
疑难解答：通过<code class="inline">write_debug</code>查看输出  </li>
  <li>
使用自定义和第三方语言模板  </li>
  <li>
在模板商店发现社区模板  </li>
</ul>
<h2>
<a href="./lab4.md">实验 4 - 深入了解函数</a></h2>
<ul>
  <li>
<a href="lab4.md#inject-configuration-through-environmental-variables">通过环境变量注入</a>    <ul>
      <li>
部署时使用 yaml      </li>
      <li>
动态使用 http 上下文 - querystring / headers 等      </li>
    </ul>
  </li>
  <li>
安全：只读文件系统  </li>
  <li>
<a href="lab4.md#making-use-of-logging">利用日志</a>  </li>
  <li>
<a href="lab4.md#create-workflows">创建工作流</a>    <ul>
      <li>
客户端使用调用链      </li>
      <li>
从一个函数中调用另一个函数      </li>
    </ul>
  </li>
</ul>
<h2>
<a href="./lab5.md">实验 5 - 构建一个 GitHub bot</a></h2>
<blockquote>
  <p>
构建 <code class="inline">issue-bot</code> - GitHub Issues 自动响应程序  </p>
</blockquote>
<ul>
  <li>
获取 GitHub 账户  </li>
  <li>
通过 ngrok 内网穿透  </li>
  <li>
为<code class="inline">issue-bot</code>创建 gou  </li>
  <li>
从 GitHub 接收 webhooks  </li>
  <li>
部署情感分析函数  </li>
  <li>
通过 GitHub API 应用标签  </li>
  <li>
完成函数  </li>
</ul>
<h2>
<a href="./lab6.md">实验 6 - 函数中的 HTML</a></h2>
<ul>
  <li>
从一个函数中生成且返回基本的 HTML  </li>
  <li>
从磁盘中读取并返回一个静态的 HTML 文件  </li>
  <li>
与其他函数协作  </li>
</ul>
<h2>
<a href="./lab7.md">实验 7 - 异步函数</a></h2>
<ul>
  <li>
同步调用 vs 异步调用  </li>
  <li>
查看 queue-worker 的日志  </li>
  <li>
使用 X-Callback-Url  </li>
</ul>
<h2>
<a href="./lab8.md">实验 8 - 高级特性 - 超时</a></h2>
<ul>
  <li>
通过 read_timeout 调节超时时间  </li>
  <li>
适应长时间运行函数  </li>
</ul>
<h2>
<a href="./lab9.md">实验 9 - 高级特性 - 自动扩容</a></h2>
<ul>
  <li>
实操自动扩容    <ul>
      <li>
最小和最大副本的一些见解      </li>
      <li>
访问本地的 Prometheus      </li>
      <li>
执行 Prometheus 查询      </li>
      <li>
使用 curl 调用函数      </li>
      <li>
观察自动扩容      </li>
    </ul>
  </li>
</ul>
<h2>
<a href="./lab10.md">实验 10 - 高级特性 - Secrets</a></h2>
<ul>
  <li>
issue-bot 使用秘钥    <ul>
      <li>
通过 faas-cli 创建 Kubernetes 秘钥      </li>
      <li>
在函数中访问秘钥      </li>
    </ul>
  </li>
</ul>
<h2>
<a href="./lab11.md">实验 11 - 高级特性 - 信任 HMAC</a></h2>
<ul>
  <li>
对使用 HMAC 的函数信任  </li>
</ul>
<p>
您可以从第一个实验<a href="lab1.md">实验 1</a>开始</p>
<h2>
停止/清理</h2>
<p>
你可以在<a href="https://docs.openfaas.com/deployment/troubleshooting/#uninstall-openfaas">这里</a>找到如何停止和删除 OpenFaaS</p>
<h2>
下一步</h2>
<p>
如果你在一个讲师指导的研讨会，并且已经完成了实验，你可能想回到实验，edit/alter 代码，或者进行一些你自己的实验。</p>
<p>
以下是后续任务/主题的一些想法：</p>
<h3>
OpenFaaS Cloud</h3>
<p>
尝试 OpenFaaS 的多用户托管体验——要么在社区集群上，要么托管自己的 OpenFaaS 云。</p>
<ul>
  <li>
<a href="https://docs.openfaas.com/openfaas-cloud/intro/">Docs: OpenFaaS Cloud</a>  </li>
</ul>
<h3>
TLS</h3>
<ul>
  <li>
<a href="https://docs.openfaas.com/reference/ssl/kubernetes-with-cert-manager/">在 Kubernetes 入口在网关上启用 HTTPS</a>  </li>
</ul>
<h3>
CI/CD</h3>
<p>
设置 Jenkins，Google Cloud Build 或 GitLab，并使用 OpenFaaS CLI 构建和部署您自己的函数：</p>
<ul>
  <li>
<a href="https://docs.openfaas.com/reference/cicd/intro/">CI/CD 简介</a>  </li>
</ul>
<h3>
存储 / 数据库</h3>
<ul>
  <li>
    <p>
<a href="https://blog.alexellis.io/openfaas-storage-for-your-functions/">尝试使用 Minio 开源对象存储</a>    </p>
  </li>
  <li>
    <p>
<a href="https://blog.alexellis.io/serverless-databases-with-openfaas-and-mongo/">使用 Mongo 尝试 OpenFaaS 存储数据</a>    </p>
  </li>
</ul>
<h3>
仪表盘 / 监控</h3>
<ul>
  <li>
<a href="https://docs.openfaas.com/architecture/metrics/#monitoring-functions">探索在 Prometheus 可用的指标</a>  </li>
</ul>
<h3>
额外的博客文章和教程</h3>
<ul>
  <li>
    <p>
<a href="https://www.openfaas.com/blog/">OpenFaaS 博客上的教程</a>    </p>
  </li>
  <li>
    <p>
<a href="https://github.com/openfaas/faas/blob/master/community.md">社区博客帖子</a>    </p>
  </li>
</ul>
<h3>
附录</h3>
<p>
<a href="./appendix.md">附录</a> 中包含一些附加内容。</p>
<h2>
致谢</h2>
<p>
感谢 @iyovcheva, @BurtonR, @johnmccabe, @laurentgrangeau, @stefanprodan, @kenfdev, @templum &amp; @rgee0 对实验的贡献、测试和翻译。</p>

            </article>
        </div>
    </body>
</html>

    