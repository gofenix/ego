<html>
    <head>
        <title> 
            node踩坑
        </title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/styles/default.min.css"
    />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/highlight.min.js"></script>

    <script>
      hljs.highlightAll();
    </script>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      .markdown-body {
        box-sizing: border-box;
        min-width: 200px;
        max-width: 980px;
        margin: 0 auto;
        padding: 45px;
      }

      @media (max-width: 767px) {
        .markdown-body {
          padding: 15px;
        }
      }
    </style>
    </head>

    <body>
        <div>
            <article class="markdown-body"> 
                <hr class="thin" />
<p>
date: “2018-05-05 15:32:59”
title: node踩坑</p>
<hr class="thin" />
<h1>
module</h1>
<p>
首先第一个就是es6的module。</p>
<p>
看到别人写的</p>
<pre><code>import { a } from &quot;./module&quot;;</code></pre>
<p>
所以自己也想要这么写，但是每次运行的时候都会报错。</p>
<pre><code>// demo2.js
export const a = &quot;hello&quot;;

//demo1.js
import { a } from &quot;./demo2&quot;;

function hello() {
  console.log(a);
}</code></pre>
<pre><code>zhuzhenfengdeMacBook-Pro :: node/node-example » node demo1.js
/Users/zhuzhenfeng/Documents/github/node/node-example/demo1.js:1
(function (exports, require, module, __filename, __dirname) { import { a } from &quot;./demo2&quot;;
                                                                     ^

SyntaxError: Unexpected token {
    at new Script (vm.js:74:7)
    at createScript (vm.js:246:10)
    at Object.runInThisContext (vm.js:298:10)
    at Module._compile (internal/modules/cjs/loader.js:646:28)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:689:10)
    at Module.load (internal/modules/cjs/loader.js:589:32)
    at tryModuleLoad (internal/modules/cjs/loader.js:528:12)
    at Function.Module._load (internal/modules/cjs/loader.js:520:3)
    at Function.Module.runMain (internal/modules/cjs/loader.js:719:10)
    at startup (internal/bootstrap/node.js:228:19)
zhuzhenfengdeMacBook-Pro :: node/node-example »</code></pre>
<p>
后来仔细查了资料之后，才发现，node现在还不能这么使用。</p>
<p>
如下是解决的办法。</p>
<p>
给每个js文件都以mjs命名。</p>
<pre><code>// module.js
export const a = &quot;hello&quot;;

// useModule.js
import { a } from &quot;./module.mjs&quot;;

function hello() {
  console.log(a);
}

hello();</code></pre>
<pre><code>zhuzhenfengdeMacBook-Pro :: node/node-example » node --experimental-modules useModule.mjs
(node:15282) ExperimentalWarning: The ESM module loader is experimental.
hello
zhuzhenfengdeMacBook-Pro :: node/node-example »</code></pre>
<p>
这样才能够正常使用。</p>

            </article>
        </div>
    </body>
</html>

    