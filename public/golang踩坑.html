<html>
    <head>
        <title> 
            golang踩坑
        </title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/styles/default.min.css"
    />
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/highlight.min.js"></script>

    <script>
      hljs.highlightAll();
    </script>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      .markdown-body {
        box-sizing: border-box;
        min-width: 200px;
        max-width: 980px;
        margin: 0 auto;
        padding: 45px;
      }

      @media (max-width: 767px) {
        .markdown-body {
          padding: 15px;
        }
      }
    </style>
    </head>

    <body>
        <div>
            <article class="markdown-body"> 
                <hr class="thin" />
<p>
date: “2018-08-14 20:10:55”
title: golang踩坑</p>
<hr class="thin" />
<h3>
一</h3>
<blockquote>
  <p>
x509 error when using HTTPS inside a Docker container  </p>
</blockquote>
<p>
因为docker中没有CA证书。</p>
<p>
普通的镜像解决办法</p>
<pre><code>FROM ubuntu:14.04.1

RUN apt-get update
RUN apt-get install -y ca-certificates

CMD curl https://www.google.com</code></pre>
<p>
如果是alpine的参考这个：</p>
<pre><code>FROM docker.finogeeks.club/base/alpine
MAINTAINER &quot;zhuzhenfeng@finogeeks.club&quot;

RUN set -ex \
    &amp;&amp; apk add --no-cache ca-certificates

COPY src/wallet/wallet /opt/wallet

ENTRYPOINT /opt/wallet</code></pre>
<h3>
二</h3>
<blockquote>
  <p>
panic: runtime error: invalid memory address or nil pointer dereference
[signal 0xb code=0x1 addr=0x38 pc=0x26df]  </p>
</blockquote>
<p>
<em>“An error is returned if caused by client policy (such as CheckRedirect), or if there was an HTTP protocol error. A non-2xx response doesn’t cause an error.</em></p>
<p>
<em>When err is nil, resp always contains a non-nil resp.Body.”</em></p>
<p>
是http请求的时候，defer res.Body.Close()引起的，应该在err检查之后。</p>
<p>
The <code class="inline">defer</code> only defers the function call. The field and method are accessed immediately.</p>

            </article>
        </div>
    </body>
</html>

    